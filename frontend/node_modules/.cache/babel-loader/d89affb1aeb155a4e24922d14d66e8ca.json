{"ast":null,"code":"import _classCallCheck from\"/Users/leelakrishnak/bhanuapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/leelakrishnak/bhanuapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/leelakrishnak/bhanuapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/leelakrishnak/bhanuapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{getAllFiles}from'./api';import{List,message,Typography,Button}from'antd';import'./listfiles.css';import Filters from'./Filters';import ListFileItem from'./ListFileItem';import{angleDoubleUp}from'react-icons-kit/fa/angleDoubleUp';import{Icon}from'react-icons-kit';var Text=Typography.Text;var ListFiles=/*#__PURE__*/function(_Component){_inherits(ListFiles,_Component);var _super=_createSuper(ListFiles);function ListFiles(props){var _this;_classCallCheck(this,ListFiles);_this=_super.call(this,props);_this.goBack=function(){var cwd=_this.state.cwd;if(cwd.charAt(cwd.length-1)==='/'){cwd=cwd.substr(0,cwd.length-1);}if(cwd.lastIndexOf('/')!==-1){cwd=cwd.substr(0,cwd.lastIndexOf('/')+1);_this.getData({directory:cwd});_this.setState({cwd:cwd});}};_this.folderClicked=function(path){_this.setState({cwd:path});_this.getData({directory:path});};_this.getData=function(args){_this.setState({loading:true});getAllFiles(args).then(function(response){// console.log(response);\n_this.setState({data:response.data});}).catch(function(error){console.log(error);message.error('Failed to fetch data');}).finally(function(){_this.setState({loading:false});});};_this.state={data:[],loading:true,homeDirectory:'/',cwd:'/'};return _this;}_createClass(ListFiles,[{key:\"componentDidMount\",value:function componentDidMount(){var pathname=this.props.location.pathname;this.getData({directory:pathname});}},{key:\"render\",value:function render(){var _this2=this;var _this$state=this.state,loading=_this$state.loading,data=_this$state.data,cwd=_this$state.cwd;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"list-container\"},/*#__PURE__*/React.createElement(Filters,{data:data},function(_ref){var files=_ref.files;return/*#__PURE__*/React.createElement(List,{size:\"small\",header:/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Button,{shape:\"circle\",onClick:_this2.goBack,icon:/*#__PURE__*/React.createElement(Icon,{icon:angleDoubleUp}),style:{marginRight:'5px'}}),/*#__PURE__*/React.createElement(Text,{type:\"secondary\"},\"Current Directory: \",cwd)),bordered:true,loading:loading,dataSource:files,locale:{emptyText:'Directory is empty'},renderItem:function renderItem(item){return/*#__PURE__*/React.createElement(ListFileItem,{item:item,folderClicked:_this2.folderClicked});}});})));}}]);return ListFiles;}(Component);export default ListFiles;","map":{"version":3,"sources":["/Users/leelakrishnak/bhanuapp/src/ListFiles.jsx"],"names":["React","Component","getAllFiles","List","message","Typography","Button","Filters","ListFileItem","angleDoubleUp","Icon","Text","ListFiles","props","goBack","cwd","state","charAt","length","substr","lastIndexOf","getData","directory","setState","folderClicked","path","args","loading","then","response","data","catch","error","console","log","finally","homeDirectory","pathname","location","files","marginRight","emptyText","item"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { getAllFiles } from './api';\nimport { List, message, Typography, Button } from 'antd';\nimport './listfiles.css';\nimport Filters from './Filters';\nimport ListFileItem from './ListFileItem';\nimport { angleDoubleUp } from 'react-icons-kit/fa/angleDoubleUp';\nimport { Icon } from 'react-icons-kit';\n\nconst { Text } = Typography;\n\nclass ListFiles extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: [],\n      loading: true,\n      homeDirectory: '/',\n      cwd: '/',\n    };\n  }\n\n  goBack = () => {\n    let { cwd } = this.state;\n\n    if (cwd.charAt(cwd.length - 1) === '/') {\n      cwd = cwd.substr(0, cwd.length - 1);\n    }\n\n    if (cwd.lastIndexOf('/') !== -1) {\n      cwd = cwd.substr(0, cwd.lastIndexOf('/') + 1);\n      this.getData({ directory: cwd });\n      this.setState({ cwd: cwd });\n    }\n  };\n\n  folderClicked = (path) => {\n    this.setState({ cwd: path });\n    this.getData({ directory: path });\n  };\n\n  componentDidMount() {\n    const {\n      location: { pathname },\n    } = this.props;\n\n    this.getData({ directory: pathname });\n  }\n\n  getData = (args) => {\n    this.setState({ loading: true });\n    getAllFiles(args)\n      .then((response) => {\n        // console.log(response);\n        this.setState({ data: response.data });\n      })\n      .catch((error) => {\n        console.log(error);\n        message.error('Failed to fetch data');\n      })\n      .finally(() => {\n        this.setState({ loading: false });\n      });\n  };\n\n  render() {\n    const { loading, data, cwd } = this.state;\n\n    return (\n      <>\n        <div className='list-container'>\n          <Filters data={data}>\n            {({ files }) => {\n              return (\n                <List\n                  size='small'\n                  header={\n                    <div>\n                      <Button\n                        shape='circle'\n                        onClick={this.goBack}\n                        icon={<Icon icon={angleDoubleUp} />}\n                        style={{ marginRight: '5px' }}\n                      />\n\n                      <Text type='secondary'>Current Directory: {cwd}</Text>\n                    </div>\n                  }\n                  bordered={true}\n                  loading={loading}\n                  dataSource={files}\n                  locale={{ emptyText: 'Directory is empty' }}\n                  renderItem={(item) => (\n                    <ListFileItem\n                      item={item}\n                      folderClicked={this.folderClicked}\n                    />\n                  )}\n                />\n              );\n            }}\n          </Filters>\n        </div>\n      </>\n    );\n  }\n}\n\nexport default ListFiles;\n"]},"metadata":{},"sourceType":"module"}